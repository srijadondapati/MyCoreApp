# MyCoreApp/template/tag-work-items-steps.yml
# Template for tagging work items after deployment

parameters:
  - name: environmentName
    type: string
    default: ''

steps:
  # --------------------------------------------------
  # Ensure full git history is available
  # --------------------------------------------------
  - checkout: self
    fetchDepth: 0

  # --------------------------------------------------
  # Update Azure DevOps Work Item Tags
  # --------------------------------------------------
  - task: PowerShell@2
    displayName: 'Update Azure DevOps Work Item Tags'
    inputs:
      targetType: 'filePath'
      filePath: '$(System.DefaultWorkingDirectory)/MyCoreApp/template/Update-WorkItemTags.ps1.ps1'
      arguments: >
        -Organization "$(ADO_ORG)"
        -Project "$(ADO_PROJECT)"
        -PersonalAccessToken "$(ADO_PAT)"
        -EnvironmentTag "${{ parameters.environmentName }}"
